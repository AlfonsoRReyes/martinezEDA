---
title: "R Notebook"
output: html_notebook
---

```{r}
library(RcppOctave)
.CallOctave("version")
```

```{r}
loader <- OctaveFunction("
function [DF] = readMatfile()
  clear
  load('leukemia.mat')
  DF = whos();
end")
```


```{r}
ld <- loader()
names(ld)
```

```{r}
ld$name
ld$size
ld$bytes
ld$class
```

```{r}
df <- data.frame(ld$name, ld$bytes, ld$class)
```

```{r}
size <- ld$size
sapply(size, `[[`, 1)
sapply(size, `[[`, 2)
```

```{r}
paste(sapply(size, `[[`, 1), sapply(size, `[[`, 2), sep = "x")
```


```{r}
# convert to data frame
sz <- paste(sapply(ld$size, `[[`, 1), sapply(ld$size, `[[`, 2), sep = "x")
df <- data.frame(name = ld$name, size = sz, bytes = ld$bytes, class = ld$class)
df
```

```{r}
loader2 <- OctaveFunction("
function [DF] = readM(m)
  clear
  m
  % load(fileM)
  DF = whos();
end
")


#l2 <- loader2(project.extdata, "cereal.mat", sep = "/")
```

```{r}
#l2 <- loader2(project.extdata, "cereal.mat", sep = "/")
mat <- 'leukemia.mat'
l2 <- loader2(3)
```

```{r}
getwd()
```

